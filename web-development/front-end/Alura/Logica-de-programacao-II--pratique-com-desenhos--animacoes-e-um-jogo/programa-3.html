<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Aula 3 - Interagindo com o usu√°rio</title>
  </head>
  <body>
    <canvas></canvas>
    <div id="message" style="position: absolute; top: 20px; left: 20px;"></div>
    <script src="draw-canvas.js" type="text/javascript"></script>
    <script>
      // variable declarations
      let width = screen.width/2,
      height = width*(2/3),
      drawCanvas = new DrawCanvas(width,height),
      colors = ['blue','red','green','orange','purple','white','gray','lightblue','pink','lightgreen','yellow','lightgray'],
      selectedColorIndex = 0,
      selectedColor = colors[selectedColorIndex],
      message = document.querySelector('#message'),
      shift = 0

      // functions declarations
      function plotCircle (event){
        let x = event.pageX - drawCanvas.canvas.offsetLeft,
        y = event.pageY - drawCanvas.canvas.offsetTop,
        size = 10


      // feature with shift pressed + click each time
        // if(event.shiftKey){
        //   size += 20
        // }

      // feature by shift pressDown + click incrementally, but initial size
        // if(event.shiftKey){
        //   shift += 10
        //   size += shift
        // }

      // feature by shift pressDown + click incrementally and incremented size
        if(event.shiftKey){
          shift += 10
        }
        size += shift

        drawCanvas.circle(x,y,size,selectedColor)

      }

      function changeColor (event){
        let x = event.pageX - drawCanvas.canvas.offsetLeft,
        y = event.pageY - drawCanvas.canvas.offsetTop

        selectedColor = colors[selectedColorIndex]
        showMessage(selectedColor)

        if(selectedColorIndex < colors.length - 1 ){
          selectedColorIndex++
        }else{
          selectedColorIndex = 0
        }
        return false
      }

      function showMessage(color){
        message.innerHTML = `
          <span style='display: inline-block;margin-right: 5px;background-color: ${color}; border-radius: 100%;width: 10px;height: 10px'></span>
          <span style='color: ${color}'>Selected color: ${color}</span>
        `
        setTimeout(hideMessage, 5000)
      }

      function hideMessage(){
        message.innerHTML = ''
      }

      // funciotions callbacks
      drawCanvas.canvas.onclick = plotCircle
      drawCanvas.canvas.oncontextmenu = changeColor
    </script>
  </body>
</html>
