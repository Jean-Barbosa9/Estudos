<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Aula 3 - Interagindo com o usu√°rio</title>
  </head>
  <body>
    <canvas></canvas>
    <div id="message" style="position: absolute; top: 20px; left: 20px;"></div>
    <script src="draw-canvas.js" type="text/javascript"></script>
    <script>
      // variable declarations
      let width = screen.width/2,
      height = width*(2/3),
      drawCanvas = new DrawCanvas(width,height),
      colors = ['blue','red','green','orange','purple','white','gray','lightblue','pink','lightgreen','yellow','lightgray'],
      selectedColorIndex = 0,
      selectedColor = colors[selectedColorIndex],
      message = document.querySelector('#message'),
      maxSize = 40,
      minSize = 0,
      incrementMod = 'each time pressed',//'only when pressed','each time pressed'
      incrementalStep = 10,
      decrementalStep = 5,
      size = 10

      // functions declarations
      function plotCircle (event){
        let x = event.pageX - drawCanvas.canvas.offsetLeft,
        y = event.pageY - drawCanvas.canvas.offsetTop

        verifyMod(x,y)
      }

      function changeColor (event){
        let x = event.pageX - drawCanvas.canvas.offsetLeft,
        y = event.pageY - drawCanvas.canvas.offsetTop

        selectedColor = colors[selectedColorIndex]
        showMessage(selectedColor)

        if(selectedColorIndex < colors.length - 1 ){
          selectedColorIndex++
        }else{
          selectedColorIndex = 0
        }
        return false
      }

      function showMessage(color){
        message.innerHTML = `
          <span style='display: inline-block;margin-right: 5px;background-color: ${color}; border-radius: 100%;width: 10px;height: 10px'></span>
          <span style='color: ${color}'>Selected color: ${color}</span>
        `
        setTimeout(hideMessage, 5000)
      }

      function hideMessage(){
        message.innerHTML = ''
      }

      function verifyMod(x,y){
        // feature with shift or ctrl pressed + click each time
        if(event.shiftKey && (incrementMod == 'only when pressed')){
          let size = 20
          size += incrementalStep
          return drawCanvas.circle(x,y,size,selectedColor)
        }
        else if(event.ctrlKey && (size > minSize)){
          size -= decrementalStep
          return drawCanvas.circle(x,y,size,selectedColor)
        }

        // feature by shift pressDown + click incrementally and incremented size or click with ctrl
        if((incrementMod == 'each time pressed') && event.shiftKey && (size < maxSize)){
          size += incrementalStep
          return drawCanvas.circle(x,y,size,selectedColor)
        }
        else if(event.ctrlKey && (size > minSize)){
          size -= decrementalStep
          return drawCanvas.circle(x,y,size,selectedColor)
        }else {
          return drawCanvas.circle(x,y,size,selectedColor)
        }
      }


      // funciotions callbacks
      drawCanvas.canvas.onclick = plotCircle
      drawCanvas.canvas.oncontextmenu = changeColor
    </script>
  </body>
</html>
